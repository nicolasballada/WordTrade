<!DOCTYPE html>
<html>
 <head>    
  <title>Buyer</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/reset.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins|Sarabun" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="icon" href="img/logo.png">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
 </head>
 

<body>
  <div class="container">
   <div class="table-responsive">
    <a href="index.html"><p align="left"><i class="fas fa-igloo"> Home</i></p></a>
  <header><h2><img src="img/header.png" alt="logo" height="125px" width="650px"></h2></header>    
    <br/>
       
    <div>
     <button align="left" type="button" name="load_data" id="load_data" class="btn btn-info">Reload Books</button>
     <a href='sellForm.php'><button align="right" type="button" name="buy" id="buy" class="btn btn-info">Buy Book</button></a>
    </div>
    <br>
       
    <div id="books_table"></div>
       
   </div>
  </div>
</body>

</html>

<script>
$(document).ready(function(){
  $.ajax({
   url:"data.csv",
   dataType:"text",
   success:function(data)
   {
    var exported_data = data.split(/\r?\n|\r/);
    var table_data = '<table class="table table-bordered table-striped">';
    for(var count = 0; count<exported_data.length; count++)
    {
     var cell_data = exported_data[count].split(",");
         if(cell_data[0] == 'Avail'){
             table_data += '<tr>';
             for(var cell_count=0; cell_count<cell_data.length; cell_count++)
             {
                 
              if(cell_count == 0 || cell_count == 2 || cell_count == 3 || cell_count == 4 ||  cell_count == 5 || cell_count == 10 || cell_count == 12 || cell_count == 13 || cell_count == 14){
                  //do nothing
              } else if(cell_count == 9 && count != 0){
                  table_data += '<td> $'+cell_data[cell_count]+'</td>';
              } else {
                  if(count == 0) {
                   table_data += '<th>'+cell_data[cell_count]+'</th>';
                  }
                  else {                  
                   table_data += '<td>'+cell_data[cell_count]+'</td>';
                  }
                }
                 }
                 table_data += '</tr>'; 
        }
    }
   
    table_data += '</table>';
    $('#books_table').html(table_data);
   }
  });
});
</script>

<script>
$(document).ready(function(){
 $('#load_data').click(function(){
  $.ajax({
   url:"data.csv",
   dataType:"text",
   success:function(data)
   {
    var exported_data = data.split(/\r?\n|\r/);
    var table_data = '<table class="table table-bordered table-striped">';
    for(var count = 0; count<exported_data.length; count++)
    {
     var cell_data = exported_data[count].split(",");
         if(cell_data[0] == 'Avail'){
             table_data += '<tr>';
             for(var cell_count=0; cell_count<cell_data.length; cell_count++)
             {
                 
              if(cell_count == 0 || cell_count == 2 || cell_count == 3 || cell_count == 4 ||  cell_count == 5 || cell_count == 10 || cell_count == 12 || cell_count == 13 || cell_count == 14){
                  //do nothing
              } else if(cell_count == 9 && count != 0){
                  table_data += '<td> $'+cell_data[cell_count]+'</td>';
              } else {
                  if(count == 0) {
                   table_data += '<th>'+cell_data[cell_count]+'</th>';
                  }
                  else {                  
                   table_data += '<td>'+cell_data[cell_count]+'</td>';
                  }
                }
                 }
                 table_data += '</tr>'; 
        }
    }
   
    table_data += '</table>';
    $('#books_table').html(table_data);
   }
  });
 });
});
</script>


